<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-KJHZ868TNQ"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'G-KJHZ868TNQ');
	</script>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Enlightenment of the Day 21.02.01 - Koowoy Devs</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'G-KJHZ868TNQ', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="Koowoy Devs" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">Koowoy Devs</div>
					<div class="logo__tagline">Koowoy Develops Yet Again Today</div>
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Enlightenment of the Day 21.02.01</h1>
			<div class="post__meta meta"><div class="meta__item-author meta__item">
	<svg class="meta__icon icon icon-author" width="16" height="16" viewBox="0 0 12 16"><path d="M6 1c2.2 0 3.5 2 3.5 4.5C9.5 7 8.9 8.2 8 9c2.9.8 4 2.5 4 5v1H0v-1c0-2.5 1.1-4.2 4-5-.9-.8-1.5-2-1.5-3.5C2.5 3 3.8 1 6 1z"/></svg><span class="meta__text">Koowoy</span>
</div>
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2021-02-01T21:03:03&#43;09:00">2021-02-01</time></div></div>
		</header><div class="content post__content clearfix">
			<h1 id="sorting-and-locking-pairs-for-tideman-cs50-problem-set-3">Sorting and Locking Pairs for Tideman (CS50 Problem Set 3)</h1>
<h3 id="the-original-problem-explained-tidemanhttpscs50harvardedux2021psets3tideman">The Original Problem Explained (<a href="https://cs50.harvard.edu/x/2021/psets/3/tideman/">Tideman</a>)</h3>
<hr>
<h2 id="the-problem-encountered">The Problem Encountered</h2>
<p>Although with the test sets provided with the example seemed to work just fine with the code I originally wrote, when graded, it showed that my code didn&rsquo;t lock the pairs correctly (meaning it didn&rsquo;t lock what it was supposed to, and locked pairs where it should have skipped).</p>
<h2 id="1-sorting-problem">1. Sorting Problem</h2>
<p><strong>Instructions</strong></p>
<pre><code>Complete the sort_pairs function.

The function should sort the pairs array in decreasing order of strength of victory, where strength of victory is defined to be the number of voters who prefer the preferred candidate. If multiple pairs have the same strength of victory, you may assume that the order does not matter.
</code></pre>
<p><strong>My Original Code</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C"><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">sort_pairs</span>(<span style="color:#66d9ef">void</span>)
{
    <span style="color:#75715e">// Assign variable to hold values while swapping pairs
</span><span style="color:#75715e"></span>    pair temp;
    <span style="color:#66d9ef">int</span> swaps;

    <span style="color:#75715e">// Swap and sort until no more swap is needed
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">do</span>
    {
        swaps <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> pair_count; i<span style="color:#f92672">++</span>)
        {
            <span style="color:#75715e">// Swap places if i is smaller than i + 1
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> (preferences[pairs[i].winner][pairs[i].loser] 
                <span style="color:#f92672">&lt;</span> preferences[pairs[i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>].winner][pairs[i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>].loser])
            {
                temp <span style="color:#f92672">=</span> pairs[i];
                pairs[i] <span style="color:#f92672">=</span> pairs[i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>];
                pairs[i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> temp;
                swaps <span style="color:#f92672">++</span>;
            }
        }
    }
    <span style="color:#66d9ef">while</span> (swaps <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>);
    <span style="color:#66d9ef">return</span>;
}
</code></pre></div><p>When I ran the code with a larger test set (provided by <a href="https://gist.github.com/nicknapoli82/2379634e87f24399ed1ed12c4c2e8c9a#file-tideman_test-txt">this link</a>), I found out that my problem started here. Strangely, the first pair to be locked was <code>[Null] =&gt; [a]</code>, which was supposed to be impossible.</p>
<p>The problem was with the loop.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C"><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> pair_count; i<span style="color:#f92672">++</span>)
</code></pre></div><p>Considering that in this loop, in the course of bubble sort, <code>pairs[i]</code> is compared and swapped with <code>pairs[i + 1]</code> With the length of the loop as pair_count, in the last loop, the last pair would have been swapped with a non-existent pair.</p>
<p>Therefore, the length of the loop should be modified to following.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C"><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> pair_count <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>; i<span style="color:#f92672">++</span>)
</code></pre></div><p>However this was not enough to solve the problem.</p>
<h2 id="2-checking-for-possible-cycle">2. Checking for Possible Cycle</h2>
<p><strong>Instruction</strong></p>
<pre><code>Complete the lock_pairs function.

The function should create the locked graph, adding all edges in decreasing order of victory strength so long as the edge would not create a cycle.
</code></pre>
<p><strong>My Original Code</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C"><span style="color:#75715e">// Check if locking this pair creates a cycle
</span><span style="color:#75715e"></span><span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">check_cycle</span>(<span style="color:#66d9ef">int</span> loser, <span style="color:#66d9ef">int</span> init)
{
    <span style="color:#75715e">// If the inital value becomes a loser at some point, return true
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (loser <span style="color:#f92672">==</span> init)
    {
        <span style="color:#66d9ef">return</span> true;
    }

    <span style="color:#75715e">// Check all candidates, if the loser input is winner to any other candidate
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> candidate_count; i<span style="color:#f92672">++</span>)
    {
        <span style="color:#66d9ef">if</span> (locked[loser][i])
        {
            check_cycle(i, init)
        }
    }
    <span style="color:#66d9ef">return</span> false;
}

<span style="color:#75715e">// Lock pairs into the candidate graph in order, without creating cycles
</span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">lock_pairs</span>(<span style="color:#66d9ef">void</span>)
{
    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> pair_count; i<span style="color:#f92672">++</span>)
    {
        <span style="color:#75715e">// Only lock pairs if check cycle returns true
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (check_cycle(pairs[i].loser, pairs[i].winner) <span style="color:#f92672">==</span> false)
        {
            locked[pairs[i].winner][pairs[i].loser] <span style="color:#f92672">=</span> true;
        }
    }
    <span style="color:#66d9ef">return</span>;
}
</code></pre></div><p>Using the same test sets as above, the problem was found while locking the following pairs. If [f] =&gt; [a] is locked, it creates a cycle. Therfore, the check_cycle function should return true, and this pair should not be locked.</p>
<pre><code>if locked pairs are:

[b] =&gt; [h]

[b] =&gt; [f]

[a] =&gt; [b]

and checking cycle for: [f] =&gt; [a]
</code></pre>
<p>In the code I wrote, the loop was processed as following.</p>
<p><code>Step 1 &gt;</code></p>
<pre><code>check_cycle(a, f)
a != f
a =&gt; b exists
</code></pre>
<p><code>Step 2 &gt;</code></p>
<pre><code>check_cycle(b, f)
b != f
b =&gt; h exists
</code></pre>
<p><code>Step 3 &gt;</code></p>
<pre><code>check_cycle(h, f)
h != f
h has not been locked as winner
return false, and the whole check cycle function has ended
[f] =&gt; [a] is locked
</code></pre>
<p>As seen above, although b is winner to both h and f, before checking if the pair to f creates a cycle, the loop ends because after checking for h, <code>false</code> is returned for the whole function.</p>
<p>In order to fix this early termination of the check_cycle function, the code needs to be modified as follows.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C"><span style="color:#75715e">// Check if locking this pair creates a cycle
</span><span style="color:#75715e"></span><span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">check_cycle</span>(<span style="color:#66d9ef">int</span> loser, <span style="color:#66d9ef">int</span> init)
{
    <span style="color:#75715e">// If the inital value becomes a loser at some point, return true
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (loser <span style="color:#f92672">==</span> init)
    {
        <span style="color:#66d9ef">return</span> true;
    }

    <span style="color:#75715e">// Check all candidates, if the loser input is winner to any other candidate
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> candidate_count; i<span style="color:#f92672">++</span>)
    {
        <span style="color:#66d9ef">if</span> (locked[loser][i])
        {
            <span style="color:#75715e">// If so, recursively check for cycle, until ultimately, check_cycle reaches true or false
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> (check_cycle(i, init))
            {
                <span style="color:#66d9ef">return</span> true;
            }
        }
    }
    <span style="color:#66d9ef">return</span> false;
}

<span style="color:#75715e">// Lock pairs into the candidate graph in order, without creating cycles
</span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">lock_pairs</span>(<span style="color:#66d9ef">void</span>)
{
    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> pair_count; i<span style="color:#f92672">++</span>)
    {
        <span style="color:#75715e">// Only lock pairs if check cycle returns true
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (check_cycle(pairs[i].loser, pairs[i].winner) <span style="color:#f92672">==</span> false)
        {
            locked[pairs[i].winner][pairs[i].loser] <span style="color:#f92672">=</span> true;
        }
    }
    <span style="color:#66d9ef">return</span>;
}
</code></pre></div><p>By adding the conditional statement, the loop proceeds if the recursive function returns false, not terminating the original loop.</p>
<p><code>Step 1 &gt;</code></p>
<pre><code>check_cycle(a, f)
a != f
a =&gt; b
</code></pre>
<p><code>Step 2 &gt;</code></p>
<pre><code>check_cycle(b, f)
b != f
b =&gt; h
</code></pre>
<p><code>Step 3 &gt;</code></p>
<pre><code>check_cycle(h, f)
h != f
h has not been locked as winner
return false, but return to loop in Step 2
</code></pre>
<p><code>Step 4 &gt;</code></p>
<pre><code>continuing check_cycle(b, f)
b =&gt; f
</code></pre>
<p><code>Step 5 &gt;</code></p>
<pre><code>check_cycle(f, f)
f == f
return true
[f] =&gt; [a] is not locked</code></pre>

		</div>
		<footer class="post__footer">
			
<div class="post__tags tags clearfix">
	<svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
	<ul class="tags__list">
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/cs50/" rel="tag">CS50</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/c/" rel="tag">C</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/algorithm/" rel="tag">Algorithm</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/bubble-sort/" rel="tag">Bubble Sort</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/recursion/" rel="tag">Recursion</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/tideman/" rel="tag">Tideman</a>
		</li>
	</ul>
</div>
		</footer>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/enlightenments/enlightenment-21-01-21/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Enlightenment of the Day 21.01.21</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/til/21-02-02/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Identifying the Loser from a Game of Word Chain</p>
		</a>
	</div>
</nav>

<section class="comments">
	<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "koowoydevs" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2021 Koowoy.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>